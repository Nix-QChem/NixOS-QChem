#!/usr/bin/env nix-shell
#!nix-shell -i bash -p jq

nix-env -f release.nix -qa --arg config '{ allowEnv=true; }' --json -A qchem | \
  jq -r '[. |to_entries | .[] |
      { attribute : .key,
	name: .value.name,
	pname : .value.pname,
	version : .value.version,
	description: .value.meta.description,
	homepage: .value.meta.homepage,
	license: .value.meta.license.shortName,
       }]' > package_list.json




jq -r '(.[0] | "| name | attribute | description | license |" ),
       (.[0] | "|------|-----------|-------------|---------|"),
       (.[] | "| \(.name) | \(.attribute) | \(.description) | \(.license) |")' < package_list.json

